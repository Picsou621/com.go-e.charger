<script type="application/javascript">
  Homey.setTitle( __('pair.manual_pairing.title') );
  let device = {};
  const saveButton = $('#saveDevice');
  const testIpButton = $('#testIp');

  function testDevice() {
    $('#result').html(`
      <br>
      <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    `);
    const address = $('#address').val();
    if (address !== '') {
      Homey.emit('manual_pairing', { address: address }).then(function (result) {
        console.log('Manual pairing returned:', result);

      });
    } else {
      Homey.alert(__('pair.manual_pairing.ipRequired'), 'error');
    }
  }

</script>

<header class="homey-header">
  <p class="homey-subtitle" data-i18n="pair.manual_pairing.instructions"></p>
</header>

<form class="homey-form">
  <div class="homey-form-group">
    <label class="homey-form-label" data-i18n="pair.manual_pairing.address" for="address"></label>
    <input class="homey-form-input" id="address" type="text" value=""/>
  </div>

  <button class="homey-button-primary" type="button" id="testIp" data-i18n="pair.manual_pairing.testDevice" onclick="testDevice()">Test</button>
  <div id="result"></div>

</form>
